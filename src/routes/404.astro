---
import {type PageMeta, seoMeta} from '@stephenchenorg/astro/page'
import { getLocale } from 'i18n:astro'
import Layout from '@/layouts/Layout.astro'
import { createNestedT } from '@/utils/i18n'
import { getCanonicalUrl, getSeoConfig } from '@/utils/seoConfig'

const t = await createNestedT()
const currentLocale = getLocale()
const locale = currentLocale === 'en' ? 'en' : 'zh_TW'

const defaultSeo = getSeoConfig('home', locale)

const meta = {
  ...seoMeta({
    title: t('404.title'),
    seo_title: t('404.title'),
    seo_description: t('404.description'),
    seo_keyword: defaultSeo.seo_keyword,
    og_title: t('404.title'),
    og_description: t('404.description'),
    og_image: defaultSeo.og_image,
  }),
  canonical: getCanonicalUrl('404', locale),
} as PageMeta

Astro.response.status = 404
---

<Layout meta={meta}>
  <main class="min-h-screen flex items-center justify-center px-4 py-20" style="background: var(--theme-bg);">
    <div class="max-w-3xl mx-auto text-center">
      <!-- 404 Number with Animation -->
      <div class="relative mb-8">
        <h1
          class="text-[clamp(8rem,20vw,16rem)] font-black leading-none opacity-10 select-none"
          style="color: var(--color-primary-500);"
          aria-hidden="true"
        >
          404
        </h1>
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="text-center">
            <svg
              class="w-24 h-24 mx-auto mb-4 animate-bounce"
              style="color: var(--color-primary-500);"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
          </div>
        </div>
      </div>

      <!-- Title and Description -->
      <h2
        class="text-3xl sm:text-4xl md:text-5xl font-bold mb-6"
        style="color: var(--theme-text);"
      >
        {t('404.title')}
      </h2>
      <p
        class="text-lg sm:text-xl mb-12 opacity-80"
        style="color: var(--theme-text);"
      >
        {t('404.description')}
      </p>

      <!-- Suggestions -->
      <div class="mb-12">
        <p
          class="text-lg font-semibold mb-6"
          style="color: var(--theme-text);"
        >
          {t('404.suggestions')}
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-2xl mx-auto">
          <!-- Home -->
          <a
            href="/"
            class="group flex items-center gap-3 p-4 rounded-lg transition-all duration-300 hover:shadow-lg hover:scale-105"
            style="background: var(--theme-card-bg); border: 2px solid var(--theme-border);"
          >
            <svg
              class="w-6 h-6 flex-shrink-0 transition-transform duration-300 group-hover:scale-110"
              style="color: var(--color-primary-500);"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              />
            </svg>
            <span
              class="font-medium text-left"
              style="color: var(--theme-text);"
            >
              {t('404.suggestion1')}
            </span>
          </a>

          <!-- Services -->
          <a
            href="/services"
            class="group flex items-center gap-3 p-4 rounded-lg transition-all duration-300 hover:shadow-lg hover:scale-105"
            style="background: var(--theme-card-bg); border: 2px solid var(--theme-border);"
          >
            <svg
              class="w-6 h-6 flex-shrink-0 transition-transform duration-300 group-hover:scale-110"
              style="color: var(--color-primary-500);"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
              />
            </svg>
            <span
              class="font-medium text-left"
              style="color: var(--theme-text);"
            >
              {t('404.suggestion2')}
            </span>
          </a>

          <!-- News -->
          <a
            href="/news"
            class="group flex items-center gap-3 p-4 rounded-lg transition-all duration-300 hover:shadow-lg hover:scale-105"
            style="background: var(--theme-card-bg); border: 2px solid var(--theme-border);"
          >
            <svg
              class="w-6 h-6 flex-shrink-0 transition-transform duration-300 group-hover:scale-110"
              style="color: var(--color-primary-500);"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"
              />
            </svg>
            <span
              class="font-medium text-left"
              style="color: var(--theme-text);"
            >
              {t('404.suggestion3')}
            </span>
          </a>

          <!-- Contact -->
          <a
            href="/faq"
            class="group flex items-center gap-3 p-4 rounded-lg transition-all duration-300 hover:shadow-lg hover:scale-105"
            style="background: var(--theme-card-bg); border: 2px solid var(--theme-border);"
          >
            <svg
              class="w-6 h-6 flex-shrink-0 transition-transform duration-300 group-hover:scale-110"
              style="color: var(--color-primary-500);"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            <span
              class="font-medium text-left"
              style="color: var(--theme-text);"
            >
              {t('404.suggestion4')}
            </span>
          </a>
        </div>
      </div>

      <!-- Main CTA Button -->
      <a
        href="/"
        class="inline-flex items-center gap-2 px-8 py-4 rounded-full font-semibold text-white dark:text-black transition-all duration-300 hover:shadow-xl hover:scale-105"
        style="background: var(--color-primary-500);"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 19l-7-7m0 0l7-7m-7 7h18"
          />
        </svg>
        <span>{t('404.backHome')}</span>
      </a>
    </div>
  </main>
</Layout>

<style>
  @keyframes bounce {
    0%, 100% {
      transform: translateY(-5%);
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }
    50% {
      transform: translateY(0);
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
  }

  .animate-bounce {
    animation: bounce 2s infinite;
  }
</style>
