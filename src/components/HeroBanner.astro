---
// HeroBanner component
import {createAstroT} from '@/utils/astro-i18n'

const t = createAstroT(Astro)
---

<!-- Dark Modern Portfolio Hero Section -->
<section class="relative min-h-screen flex items-center justify-center overflow-hidden theme-section" id="page-header"
         style="background: var(--theme-bg, #0a0a0a)">
  <!-- Subtle texture background -->
  <div
    class="absolute inset-0 z-0 bg-[radial-gradient(circle_at_center,_rgba(255,255,255,0.02)_1px,_transparent_1px)] bg-[size:60px_60px]"></div>

  <!-- Main Content -->
  <div class="relative z-10 w-full max-w-7xl mx-auto px-6 lg:px-8">
    <div class="text-center space-y-12">

      <!-- Category Label -->
      <div class="animate-fade-in-up [animation-delay:0.2s] [animation-fill-mode:both]">
        <span class="text-base tracking-[0.3em] uppercase font-light"
              style="color: var(--theme-text-secondary, rgba(255,255,255,0.6))">
          我們的故事
        </span>
      </div>

      <!-- Main Heading -->
      <div class="space-y-6 animate-fade-in-up [animation-delay:0.4s] [animation-fill-mode:both]">
        <h1 class="text-[clamp(4rem,12vw,12rem)] font-black leading-[0.85] tracking-[-0.05em] uppercase"
            style="color: var(--theme-text, #ffffff)">
          享天堂
        </h1>
      </div>

      <!-- Description -->
      <div class="animate-fade-in-up [animation-delay:0.6s] [animation-fill-mode:both] max-w-3xl mx-auto space-y-4">
        <p class="text-lg md:text-xl leading-relaxed font-light tracking-wide"
           style="color: var(--theme-text, rgba(255,255,255,0.8))">
          從場地、團隊到精油皆嚴格把關，享天堂讓您置身天堂
        </p>
        <p class="text-sm md:text-base uppercase tracking-[0.2em] font-light"
           style="color: var(--theme-text-secondary, rgba(255,255,255,0.5))">
          我們擁有各式不同的SPA服務以及男士熱蠟除毛<br class="hidden md:block">
        </p>
      </div>
    </div>
  </div>

  <!-- Social Links - Left Side -->
  <div class="absolute left-8 bottom-8 z-10 hidden md:block">
    <div class="flex flex-col space-y-4">
      <a href="#" class="text-white/40 hover:text-white transition-colors duration-300">
        <span class="text-xs tracking-wider">FB</span>
      </a>
      <a href="#" class="text-white/40 hover:text-white transition-colors duration-300">
        <span class="text-xs tracking-wider">IG</span>
      </a>
      <a href="#" class="text-white/40 hover:text-white transition-colors duration-300">
        <span class="text-xs tracking-wider">LI</span>
      </a>
    </div>
  </div>

  <!-- Circular Rotating Scroll Indicator - Right Side -->
  <div class="absolute right-8 bottom-8 z-10 animate-fade-in-up [animation-delay:1s] [animation-fill-mode:both]">
    <div class="relative w-32 h-32 rotating-circle">
      <!-- Circular Text -->
      <div class="circle-text absolute inset-0 w-full h-full">
        <span data-i18n="hero.scroll" class="text-xs tracking-[0.2em] uppercase font-light text-white/60">{t('hero.scroll')}</span>
      </div>
      
      <!-- Center Arrow -->
      <div class="absolute inset-0 flex items-center justify-center">
        <svg class="w-6 h-6 text-white/80 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Decorative elements -->
  <div class="absolute top-8 left-1/2 -translate-x-1/2 z-10">
    <div class="w-12 h-px bg-white/20"></div>
  </div>
</section>

<style>
  /* Custom animations for fade-in-up effect */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(60px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fadeInUp 1s ease both;
  }

  /* Circular rotating text */
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .rotating-circle {
    animation: rotate 20s linear infinite;
  }

  .circle-text {
    position: relative;
  }

  .circle-text span {
    position: relative;
    display: block;
    width: 100%;
    height: 100%;
  }

  .circle-text .char {
    position: absolute;
    left: 50%;
    top: 50%;
    transform-origin: 0 -50px; /* Radius of the circle */
    font-size: 10px;
    letter-spacing: 0.1em;
    color: rgba(255,255,255,0.6);
  }
</style>

<script>
  // 創建圓形文字效果
  document.addEventListener('DOMContentLoaded', () => {
    const circleText = document.querySelector('.circle-text span') as HTMLElement
    if (circleText) {
      const text = circleText.textContent || ''
      const chars = text.split('')
      
      // 清空原始文字
      circleText.innerHTML = ''
      
      // 過濾掉空格，只計算實際字符
      const validChars = chars.filter(char => char !== ' ')
      let charIndex = 0
      
      // 為每個字符創建元素並定位
      chars.forEach((char, index) => {
        if (char === ' ') {
          // 跳過空格
          return
        }
        
        const charElement = document.createElement('span')
        charElement.textContent = char
        charElement.className = 'char'
        
        // 計算每個字符的旋轉角度，基於有效字符數量
        const angle = (360 / validChars.length) * charIndex
        charElement.style.transform = `rotate(${angle}deg) translateY(-50%)`
        
        circleText.appendChild(charElement)
        charIndex++
      })
    }

    // 滾動時改變文字顏色
    const heroTitle = document.querySelector('h1') as HTMLElement
    if (heroTitle) {
      window.addEventListener('scroll', () => {
        const scrollY = window.scrollY
        if (scrollY > 100) {
          heroTitle.style.color = 'var(--theme-text-primary, #D7AE54)'
        } else {
          heroTitle.style.color = 'var(--theme-text, #ffffff)'
        }
      })
    }

    // 處理主題變更事件
    document.addEventListener('themeChanged', (e: any) => {
      const theme = e.detail.theme
      const circleTextSpans = document.querySelectorAll('.circle-text .char')
      
      circleTextSpans.forEach(span => {
        const htmlSpan = span as HTMLElement
        if (theme === 'dark') {
          htmlSpan.style.color = 'rgba(255,255,255,0.6)'
        } else {
          htmlSpan.style.color = 'rgba(0,0,0,0.6)'
        }
      })
    })
  })
</script>
