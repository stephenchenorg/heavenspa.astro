---
import type { TeamMember } from '@/components/TeamSection.astro'
import { seoMeta } from '@stephenchenorg/astro/page'
import { gql, graphQLAPI } from '@/api'
import Layout from '@/layouts/Layout.astro'

export async function getStaticPaths() {
  try {
    const teamsData = await graphQLAPI(gql`
      query MyQuery {
        teams(sort_by: "asc", sort_column: "sort") {
          data {
            id
            title
            category {
              title
            }
            images {
              created_at
              id
              image {
                desktop
                desktop_blur
                mobile
                mobile_blur
              }
              updated_at
              is_default
            }
            image {
              desktop
              desktop_blur
              mobile
              mobile_blur
            }
          }
        }
      }
    `)

    const teamMembers = teamsData.teams.data || []

    return teamMembers.map((member: TeamMember & { id: number }) => ({
      params: { id: member.id.toString() },
      props: { member },
    }))
  } catch (error) {
    console.error('Failed to fetch team data for static paths:', error)
    return []
  }
}

const { id } = Astro.params
const { member } = Astro.props as { member: TeamMember & { id: number } }

const meta = seoMeta({
  title: `Heaven Spa`,
  description: `了解更多關於 的專業服務和經驗。`,
})
---

<Layout meta={meta}>
  <main class="section-container pt-32">

    <h1 class="flex justify-center font-bold text-7xl">團隊成員介紹頁面，施工中</h1>
  </main>
</Layout>
