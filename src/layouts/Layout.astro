---
import type { PageMeta } from '@stephenchenorg/astro/page'
import type { CompanySetting } from '@/types'
import BaseLayout from '@/layouts/BaseLayout.astro'
import Footer from '@/layouts/partials/Footer.astro'
import Header from '@/layouts/partials/Header.astro'
import FloatingContactSidebar from '@/components/FloatingContactSidebar.vue'
import { getCompanySetting } from '@/api/companySetting'
import { getLocaleFromRequest } from '@/utils/astro-i18n'

const locale = getLocaleFromRequest(Astro.request)
const companySetting = await getCompanySetting(locale)

interface Props {
  // metadata
  meta: PageMeta

  // layout props
  // ...
}

const {
  meta,
} = Astro.props

---

<BaseLayout meta={meta}>
  <div class="w-full" style="background: var(--theme-bg, #0a0a0a); color: var(--theme-text, #ffffff);">
    <Header companySetting={companySetting} />

    <slot />

    <Footer companySetting={companySetting} />

    <FloatingContactSidebar
      client:load
      companySetting={companySetting}
    />
  </div>

  <!-- Theme Controller -->
  <!--<ThemeController />-->
</BaseLayout>
