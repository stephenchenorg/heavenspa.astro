---
import type { PageMeta } from '@stephenchenorg/astro/page'
import BaseLayout from '@/layouts/BaseLayout.astro'
import Footer from '@/layouts/partials/Footer.astro'
import Header from '@/layouts/partials/Header.astro'
import FloatingContactSidebar from '@/components/FloatingContactSidebar.vue'
import { getCompanySetting } from '@/api/companySetting'
import { setRequestLocals } from '@/api/index'

// middleware 已經設定了 Astro.locals.locale
setRequestLocals(Astro.locals)
const companySetting = await getCompanySetting()

interface Props {
  // metadata
  meta: PageMeta

  // layout props
  // ...
}

const {
  meta,
} = Astro.props

---

<BaseLayout meta={meta}>
  <div class="w-full" style="background: var(--theme-bg, #0a0a0a); color: var(--theme-text, #ffffff);">
    <Header companySetting={companySetting} />

    <slot />

    <Footer />

    <FloatingContactSidebar
      client:load
      companySetting={companySetting}
    />
  </div>

  <!-- Theme Controller -->
  <!--<ThemeController />-->
</BaseLayout>
