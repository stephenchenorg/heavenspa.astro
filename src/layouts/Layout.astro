---
import type { PageMeta } from '@stephenchenorg/astro/page'
import type { CompanySetting } from '@/types'
import { gql, graphQLAPI } from '@/api'
import BaseLayout from '@/layouts/BaseLayout.astro'
import Footer from '@/layouts/partials/Footer.astro'
import Header from '@/layouts/partials/Header.astro'

interface Props {
  // metadata
  meta: PageMeta

  // layout props
  // ...
}

const data: CompanySetting = await graphQLAPI(gql`
  query GetCompanySetting {
    companySetting {
      address_1
      address_2
      description
      email_1
      email_2
      fb_link
      ig_link
      lang
      line_link
      whatsapp_link
      twitter_link
      logo
      name
      phone_1
      phone_2
      tg_link
      vat
    }
  }
`)

const {
  meta,
} = Astro.props

---

<BaseLayout meta={meta}>
  <div class="w-full" style="background: var(--theme-bg, #0a0a0a); color: var(--theme-text, #ffffff);">
    <Header companySetting={data.companySetting} />

    <slot />

    <Footer companySetting={data.companySetting} />

    {/* Floating Contact Sidebar - currently disabled
    (data.companySetting.phone_1 || data.companySetting.whatsapp_link || data.companySetting.line_link) && (
      <FloatingContactSidebar
        client:load
        companySetting={data.companySetting}
      />
    ) */}
  </div>

  <!-- Theme Controller -->
  <!--<ThemeController />-->
</BaseLayout>
