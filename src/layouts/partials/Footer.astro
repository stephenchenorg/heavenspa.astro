---
import type { CompanySettingData } from '@/types'
import Facebook from '@/components/icon/Facebook.astro'
import Instagram from '@/components/icon/Instagram.astro'
import Line from '@/components/icon/Line.astro'
import X from '@/components/icon/X.astro'
import Button from '@/components/ui/Button.astro'
import { createAstroT } from '@/utils/astro-i18n'

export interface Props {
  class?: astroHTML.JSX.HTMLAttributes['class']
  companySetting?: CompanySettingData | null
}

const {
  companySetting = null,
} = Astro.props

// 翻譯函數
const t = createAstroT(Astro)
---

<footer class="main-footer theme-section" style="background: var(--theme-bg, #ffffff); color: var(--theme-text, #000000)">
  <div class="footer-container">

    <!-- 主要資訊區塊 -->

    <!-- 社群媒體 -->
    <div class="footer-center">
      <div class="social-section-button">
        <Button>{t('buttons.book-now')}</Button>
      </div>
      <div class="social-section">
        <h4 class="social-title">{t('footer.follow-us')}</h4>
        <div class="social-links">
          {companySetting?.ig_link && (
            <a
              href={companySetting.ig_link}
              class="social-link instagram"
              title="Instagram" 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <Instagram />
              </span>
              <span class="social-bg-effect"></span>
            </a>
          )}

          {companySetting?.fb_link && (
            <a
              href={companySetting.fb_link}
              class="social-link facebook"
              title="Facebook" 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <Facebook />
              </span>
              <span class="social-bg-effect"></span>
            </a>
          )}

          {companySetting?.line_link && (
            <a href={companySetting.line_link} class="social-link line" title="LINE" target="_blank" rel="noopener noreferrer">
              <span class="social-icon">
                <Line />
              </span>
              <span class="social-bg-effect"></span>
            </a>
          )}
          {companySetting?.twitter_link && (
            <a
              href={companySetting.twitter_link}
              class="social-link twitter"
              title="Twitter" 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <X />
              </span>
            </a>
          )}
        </div>
      </div>
    </div>

    <div class="footer-center">
      <!-- Logo 區域 -->
      <div class="footer-logo">
        <div class="logo-text">{companySetting?.name}</div>
        <div class="logo-subtitle">HEAVEN SPA</div>
      </div>
    </div>
    <div class="footer-center">
      <!-- 左側：關於我們 -->
      <div class="footer-left">

        <!-- 關於我們 -->
        <div class="about-section">
          <h4 class="text-5xl font-light mb-8">{t('footer.contact-info')}</h4>

          <div class="contact-item">
            <span class="contact-label">{t('footer.phone')}</span>
            <a href={`tel:${companySetting?.phone_1}`} class="contact-value">
              {companySetting?.phone_1}
            </a>
          </div>

          <div class="contact-item">
            <span class="contact-label">{t('footer.address')}</span>
            <span class="contact-value">{companySetting?.address_1}</span>
          </div>

          <div class="contact-item">
            <span class="contact-label">{t('footer.business-hours')}</span>
            <span class="contact-value">AM 10:00~AM 00:00 (最後收客時間)</span>
          </div>
        </div>

      </div>
      <!-- 右側：地圖 -->
      <div class="footer-right">
        <div class="map-section">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4508.44669894671!2d121.5258937!3d25.058255700000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442a96bfd60fe63%3A0x54b492f3bcf5fd83!2z5Lqr5aSp5aCCIFNwYSBpbiBIZWF2ZW4gLSBTcGHmjInmkakv5a6i6KO95YyW6YGL5YuV5oyJ5pGpL-eUt-Wjq-eGseign-mZpOavmw!5e1!3m2!1szh-TW!2stw!4v1756193360833!5m2!1szh-TW!2stw"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            class="w-[600px] h-[450px] map-iframe"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
    </div>
    <!-- 版權資訊 -->
    <div class="footer-bottom">
      <div class="copyright">
        <p>&copy; 2025 {companySetting?.name}. All Rights Reserved.</p>
      </div>
    </div>

  </div>

  <style>
    .main-footer {
      background: #ffffff;
      color: #000000;
      position: relative;
      overflow: hidden;
      width: 100%;
      border-top: 1px solid #f0f0f0;
    }

    .footer-container {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
    }

    /* 預約服務區塊 */
    .booking-section {
      background: linear-gradient(135deg, #8b7355 0%, #a0896b 100%);
      padding: 3rem 2rem;
      text-align: center;
      position: relative;
    }

    .booking-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .booking-title {
      font-size: 2.5rem;
      font-weight: 400;
      color: white;
      margin-bottom: 1.5rem;
      letter-spacing: 2px;
    }

    .services-list {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
    }

    .service-item {
      color: white;
      font-size: 1.1rem;
      font-weight: 400;
      letter-spacing: 1px;
    }

    .service-divider {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1rem;
    }

    .booking-btn {
      background: #e17055;
      color: white;
      border: none;
      padding: 1rem 3rem;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 500;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(225, 112, 85, 0.3);
    }

    .booking-btn:hover {
      background: #d63031;
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(225, 112, 85, 0.4);
    }

    /* 主要資訊區塊 */
    .footer-main {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 3rem;
      padding: 4rem 2rem;
      align-items: start;
    }

    /* 左側：關於我們 */
    .footer-left {
      padding-right: 2rem;
    }

    .logo-text {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--theme-text);
      letter-spacing: 3px;
      line-height: 1;
    }

    .logo-subtitle {
      font-size: 1rem;
      color: #666666;
      letter-spacing: 2px;
      margin-top: 0.5rem;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #000000;
      margin-bottom: 1.5rem;
      letter-spacing: 1px;
    }

    .contact-item {
      display: flex;
      flex-direction: column;
      margin-bottom: 1.5rem;
      gap: 0.5rem;
    }

    .contact-label {
      font-size: 0.9rem;
      color: #666666;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .contact-value {
      font-size: 1rem;
      color: var(--theme-text);
      line-height: 1.6;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .contact-value:hover {
      color: var(--color-gold-500);
    }

    /* 中間：社群媒體 */
    .footer-center {
      display: flex;
      justify-content: space-between;
      align-items: end;
      padding: 30px;
    }

    .social-section {
      text-align: center;
    }

    .social-title {
      font-size: 1.2rem;
      font-weight: 500;
      color: var(--theme-text, #000000);
      margin-bottom: 2rem;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .social-links {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      align-items: center;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      transform: translateY(-3px);
    }

    .dark-theme .social-link:hover {
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.15);
    }

    .social-icon {
      font-size: 1.4rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      color: var(--theme-text, #000000);
    }

    .social-icon svg {
      width: 24px;
      height: 24px;
      transition: all 0.3s ease;
    }

    .social-link:hover .social-icon {
      color: var(--theme-text-secondary, #666666);
      transform: scale(1.1);
    }

    /* 右側：地圖 */
    .map-section {
      width: 100%;
      height: 300px;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }


    /* 版權資訊 */
    .footer-bottom {
      padding: 1.5rem 2rem;
      text-align: center;
      border-top: 1px solid #666666;
    }

    .copyright p {
      font-size: 0.9rem;
      color: #666666;
      letter-spacing: 0.5px;
    }

    /* 響應式設計 */
    @media (max-width: 1200px) {
      .footer-center {
        padding: 25px;
        gap: 2rem;
      }

      .social-links {
        justify-content: center;
      }
    }

    @media (max-width: 1024px) {
      .footer-center {
        padding: 20px;
      }

      .map-section {
        height: 280px;
      }

      .social-link {
        width: 55px;
        height: 55px;
      }

      .social-icon {
        width: 35px;
        height: 35px;
      }

      .social-icon svg {
        width: 35px;
        height: 35px;
      }

      .map-iframe {
        width: 100%;
        height: 100%;
        border: none;
        filter: grayscale(20%);
        transition: filter 0.3s ease;
      }

      .map-iframe:hover {
        filter: grayscale(0%);
      }
    }

    @media (max-width: 768px) {
      .footer-center {
        padding: 15px;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .social-links {
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .social-link {
        width: 50px;
        height: 50px;
      }

      .social-icon {
        width: 30px;
        height: 30px;
      }

      .social-icon svg {
        width: 30px;
        height: 30px;
      }

      .map-section {
        height: 220px;
      }

      .logo-text {
        font-size: 2rem;
      }

      .section-title {
        font-size: 1.3rem;
      }
    }

    @media (max-width: 480px) {
      .footer-center {
        padding: 10px;
      }

      .social-title {
        font-size: 1rem;
        margin-bottom: 1.5rem;
      }

      .social-links {
        gap: 0.8rem;
      }

      .social-link {
        width: 45px;
        height: 45px;
      }

      .social-icon {
        width: 28px;
        height: 28px;
      }

      .social-icon svg {
        width: 28px;
        height: 28px;
      }

      .map-section {
        height: 200px;
      }

      .logo-text {
        font-size: 1.8rem;
      }

      .section-title {
        font-size: 1.2rem;
      }

      .contact-item {
        margin-bottom: 1rem;
      }

      .contact-value {
        font-size: 0.9rem;
      }
    }

    /* 動畫效果 */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .footer-left,
    .footer-center,
    .footer-right {
      animation: fadeInUp 0.6s ease forwards;
    }

    .footer-center {
      animation-delay: 0.2s;
    }

    .footer-right {
      animation-delay: 0.4s;
    }
  </style>
</footer>
