---
import type { CompanySettingData } from '@/types'
import Button from '@/components/ui/Button.astro'
import { createAstroT } from '@/utils/astro-i18n'

export interface Props {
  class?: astroHTML.JSX.HTMLAttributes['class']
  companySetting?: CompanySettingData | null
}

const {
  companySetting = null,
} = Astro.props

// 翻譯函數
const t = createAstroT(Astro)
---

<footer class="main-footer">
  <div class="footer-container">

    <!-- 主要資訊區塊 -->

    <!-- 社群媒體 -->
    <div class="footer-center">
      <div class="social-section-button">
        <Button>{t('buttons.book-now')}</Button>
      </div>
      <div class="social-section">
        <h4 class="social-title">{t('footer.follow-us')}</h4>
        <div class="social-links">
          {companySetting?.ig_link && (
            <a
              href={companySetting.ig_link}
              class="social-link"
              title=Instagram 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <div class="w-full h-full rounded-lg relative" style="background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%); display: block !important;">
                  <svg class="absolute inset-0 w-full h-full" xmlns="http://www.w3.org/2000/svg" aria-label="Instagram" role="img" viewBox="0 0 512 512" style="display: block !important;">
                    <g fill="none" stroke="#ffffff" stroke-width="30">
                      <rect width="308" height="308" x="102" y="102" rx="81" />
                      <circle cx="256" cy="256" r="72" />
                      <circle cx="347" cy="165" r="6" />
                    </g>
                  </svg>
                </div>
              </span>
            </a>
          )}

          {companySetting?.fb_link && (
            <a
              href={companySetting.fb_link}
              class="social-link"
              title=Facebook 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <svg aria-label="Facebook" role="img" viewBox="0 0 24 24" width="40" height="40" fill="#1877F2">
                  <title>Facebook</title>
                  <path d="M22.675 0h-21.35C.597 0 0 .597 0 1.325v21.351C0 23.403.597 24 1.325 24H12.82v-9.294H9.691v-3.622h3.129V8.413c0-3.1 1.894-4.788 4.659-4.788 1.325 0 2.463.099 2.793.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.763v2.31h3.59l-.467 3.622h-3.123V24h6.116C23.403 24 24 23.403 24 22.676V1.325C24 .597 23.403 0 22.675 0z" />
                </svg>
              </span>
            </a>
          )}

          {companySetting?.line_link && (
            <a href={companySetting.line_link} class="social-link" title=LINE target="_blank" rel="noopener noreferrer">
              <span class="social-icon">
                <svg aria-label="LINE" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 320" width="40" height="40">
                  <title>LINE</title>
                  <defs>
                    <style>
                      .cls-1 {
                        fill: #06c755;
                      }
                      .cls-2 {
                        fill: #fff;
                      }
                    </style>
                  </defs>
                  <g id="Layer_2" data-name="Layer 2">
                    <g id="LINE_LOGO" data-name="LINE LOGO">
                      <rect class="cls-1" width="320" height="320" rx="72.14" />
                      <path class="cls-2" d="M266.66,144.92c0-47.74-47.86-86.58-106.69-86.58S53.28,97.18,53.28,144.92c0,42.8,38,78.65,89.22,85.42,3.48.75,8.21,2.29,9.4,5.26,1.08,2.7.71,6.93.35,9.65,0,0-1.25,7.53-1.52,9.13-.47,2.7-2.15,10.55,9.24,5.76s61.44-36.18,83.82-61.95h0C259.25,181.24,266.66,164,266.66,144.92Z" />
                      <path class="cls-1" d="M231.16,172.49h-30a2,2,0,0,1-2-2v0h0V123.94h0v0a2,2,0,0,1,2-2h30a2,2,0,0,1,2,2v7.57a2,2,0,0,1-2,2H210.79v7.85h20.37a2,2,0,0,1,2,2V151a2,2,0,0,1-2,2H210.79v7.86h20.37a2,2,0,0,1,2,2v7.56A2,2,0,0,1,231.16,172.49Z" />
                      <path class="cls-1" d="M120.29,172.49a2,2,0,0,0,2-2v-7.56a2,2,0,0,0-2-2H99.92v-37a2,2,0,0,0-2-2H90.32a2,2,0,0,0-2,2v46.53h0v0a2,2,0,0,0,2,2h30Z" />
                      <rect class="cls-1" x="128.73" y="121.85" width="11.64" height="50.64" rx="2.04" />
                      <path class="cls-1" d="M189.84,121.85h-7.56a2,2,0,0,0-2,2v27.66l-21.3-28.77a1.2,1.2,0,0,0-.17-.21v0l-.12-.12,0,0-.11-.09-.06,0-.11-.08-.06,0-.11-.06-.07,0-.11,0-.07,0-.12,0-.08,0-.12,0h-.08l-.11,0h-7.71a2,2,0,0,0-2,2v46.56a2,2,0,0,0,2,2h7.57a2,2,0,0,0,2-2V142.81l21.33,28.8a2,2,0,0,0,.52.52h0l.12.08.06,0,.1.05.1,0,.07,0,.14,0h0a2.42,2.42,0,0,0,.54.07h7.52a2,2,0,0,0,2-2V123.89A2,2,0,0,0,189.84,121.85Z" />
                    </g>
                  </g>
                </svg>
              </span>
            </a>
          )}
          {companySetting?.twitter_link && (
            <a
              href={companySetting.twitter_link}
              class="social-link"
              title=Twitter 
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="social-icon">
                <svg aria-label="X" role="img" viewBox="0 0 24 24" width="40" height="40" fill="#000000">
                  <title>X</title>
                  <path d="M18.244 2H22l-7.89 9.45L22.5 22h-6.6l-4.77-6.19L6.02 22H2l8.51-9.86L2.5 2h6.6l4.58 6.06L18.244 2z" />
                </svg>
              </span>
            </a>
          )}
        </div>
      </div>
    </div>

    <div class="footer-center">
      <!-- Logo 區域 -->
      <div class="footer-logo">
        <div class="logo-text">{companySetting?.name}</div>
        <div class="logo-subtitle">HEAVEN SPA</div>
      </div>
    </div>
    <div class="footer-center">
      <!-- 左側：關於我們 -->
      <div class="footer-left">

        <!-- 關於我們 -->
        <div class="about-section">
          <h4 class="section-title">{t('footer.contact-info')}</h4>

          <div class="contact-item">
            <span class="contact-label">{t('footer.phone')}</span>
            <a href={`tel:${companySetting?.phone_1}`} class="contact-value">
              {companySetting?.phone_1}
            </a>
          </div>

          <div class="contact-item">
            <span class="contact-label">{t('footer.address')}</span>
            <span class="contact-value">{companySetting?.address_1}</span>
          </div>

          <div class="contact-item">
            <span class="contact-label">{t('footer.business-hours')}</span>
            <span class="contact-value">AM 10:00~AM 00:00 (最後收客時間)</span>
          </div>
        </div>

      </div>
      <!-- 右側：地圖 -->
      <div class="footer-right">
        <div class="map-section">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4508.44669894671!2d121.5258937!3d25.058255700000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442a96bfd60fe63%3A0x54b492f3bcf5fd83!2z5Lqr5aSp5aCCIFNwYSBpbiBIZWF2ZW4gLSBTcGHmjInmkakv5a6i6KO95YyW6YGL5YuV5oyJ5pGpL-eUt-Wjq-eGseign-mZpOavmw!5e1!3m2!1szh-TW!2stw!4v1756193360833!5m2!1szh-TW!2stw"
            width="600"
            height="450"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
    </div>
    <!-- 版權資訊 -->
    <div class="footer-bottom">
      <div class="copyright">
        <p>&copy; 2025 {companySetting?.name}. All Rights Reserved.</p>
      </div>
    </div>

  </div>

  <style>
    .main-footer {
      background: linear-gradient(135deg, #f8f6f0 0%, #ede6d6 100%);
      color: #5d4037;
      position: relative;
      overflow: hidden;
      width: 100%;
    }

    .footer-container {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
    }

    /* 預約服務區塊 */
    .booking-section {
      background: linear-gradient(135deg, #8b7355 0%, #a0896b 100%);
      padding: 3rem 2rem;
      text-align: center;
      position: relative;
    }

    .booking-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .booking-title {
      font-size: 2.5rem;
      font-weight: 400;
      color: white;
      margin-bottom: 1.5rem;
      letter-spacing: 2px;
    }

    .services-list {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
    }

    .service-item {
      color: white;
      font-size: 1.1rem;
      font-weight: 400;
      letter-spacing: 1px;
    }

    .service-divider {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1rem;
    }

    .booking-btn {
      background: #e17055;
      color: white;
      border: none;
      padding: 1rem 3rem;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 500;
      letter-spacing: 1px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(225, 112, 85, 0.3);
    }

    .booking-btn:hover {
      background: #d63031;
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(225, 112, 85, 0.4);
    }

    /* 主要資訊區塊 */
    .footer-main {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 3rem;
      padding: 4rem 2rem;
      align-items: start;
    }

    /* 左側：關於我們 */
    .footer-left {
      padding-right: 2rem;
    }

    .logo-text {
      font-size: 2.5rem;
      font-weight: 700;
      color: #8b7355;
      letter-spacing: 3px;
      line-height: 1;
    }

    .logo-subtitle {
      font-size: 1rem;
      color: #a0896b;
      letter-spacing: 2px;
      margin-top: 0.5rem;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #5d4037;
      margin-bottom: 1.5rem;
      letter-spacing: 1px;
    }

    .contact-item {
      display: flex;
      flex-direction: column;
      margin-bottom: 1.5rem;
      gap: 0.5rem;
    }

    .contact-label {
      font-size: 0.9rem;
      color: #8b7355;
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    .contact-value {
      font-size: 1rem;
      color: #5d4037;
      line-height: 1.6;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .contact-value:hover {
      color: #e17055;
    }

    /* 中間：社群媒體 */
    .footer-center {
      display: flex;
      justify-content: space-between;
      align-items: end;
      padding: 30px;
    }

    .social-section {
      text-align: center;
    }

    .social-title {
      font-size: 1.2rem;
      font-weight: 500;
      color: #8b7355;
      margin-bottom: 2rem;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .social-links {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      align-items: center;
    }

    .social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      border-radius: 8px;
      text-decoration: none;
      transition: all 0.3s ease;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .social-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .social-icon {
      font-size: 1.4rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      color: #C9A48E;
    }

    .social-icon svg {
      width: 40px;
      height: 40px;
      transition: all 0.3s ease;
    }

    .social-link:hover .social-icon {
      transform: scale(1.1);
    }

    /* 右側：地圖 */
    .footer-right {
      padding-left: 2rem;
    }

    .map-section {
      width: 100%;
      height: 300px;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .map-iframe {
      width: 100%;
      height: 100%;
      border: none;
      filter: grayscale(20%);
      transition: filter 0.3s ease;
    }

    .map-iframe:hover {
      filter: grayscale(0%);
    }

    /* 版權資訊 */
    .footer-bottom {
      padding: 1.5rem 2rem;
      text-align: center;
      border-top: 1px solid rgba(139, 115, 85, 0.2);
    }

    .copyright p {
      font-size: 0.9rem;
      color: #8b7355;
      letter-spacing: 0.5px;
    }

    /* 響應式設計 */
    @media (max-width: 1200px) {
      .footer-center {
        padding: 25px;
        gap: 2rem;
      }

      .social-links {
        justify-content: center;
      }
    }

    @media (max-width: 1024px) {
      .footer-center {
        padding: 20px;
      }

      .map-section {
        height: 280px;
      }

      .social-link {
        width: 55px;
        height: 55px;
      }

      .social-icon {
        width: 35px;
        height: 35px;
      }

      .social-icon svg {
        width: 35px;
        height: 35px;
      }
    }

    @media (max-width: 768px) {
      .footer-center {
        padding: 15px;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .social-links {
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .social-link {
        width: 50px;
        height: 50px;
      }

      .social-icon {
        width: 30px;
        height: 30px;
      }

      .social-icon svg {
        width: 30px;
        height: 30px;
      }

      .map-section {
        height: 220px;
      }

      .logo-text {
        font-size: 2rem;
      }

      .section-title {
        font-size: 1.3rem;
      }
    }

    @media (max-width: 480px) {
      .footer-center {
        padding: 10px;
      }

      .social-title {
        font-size: 1rem;
        margin-bottom: 1.5rem;
      }

      .social-links {
        gap: 0.8rem;
      }

      .social-link {
        width: 45px;
        height: 45px;
      }

      .social-icon {
        width: 28px;
        height: 28px;
      }

      .social-icon svg {
        width: 28px;
        height: 28px;
      }

      .map-section {
        height: 200px;
      }

      .logo-text {
        font-size: 1.8rem;
      }

      .section-title {
        font-size: 1.2rem;
      }

      .contact-item {
        margin-bottom: 1rem;
      }

      .contact-value {
        font-size: 0.9rem;
      }
    }

    /* 動畫效果 */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .footer-left,
    .footer-center,
    .footer-right {
      animation: fadeInUp 0.6s ease forwards;
    }

    .footer-center {
      animation-delay: 0.2s;
    }

    .footer-right {
      animation-delay: 0.4s;
    }
  </style>
</footer>
