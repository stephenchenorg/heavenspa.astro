---
import type { CompanySettingData } from '@/types'

import Clock from '@/components/icon/Clock.vue'
import CreditCard from '@/components/icon/CreditCard.vue'
import Email from '@/components/icon/Email.vue'
import Facebook from '@/components/icon/Facebook.vue'
import Instagram from '@/components/icon/Instagram.vue'
import Line from '@/components/icon/Line.vue'
import MapPin from '@/components/icon/MapPin.vue'
import Phone from '@/components/icon/Phone.vue'
import Telegram from '@/components/icon/Telegram.vue'
import Threads from '@/components/icon/Threads.vue'
import X from '@/components/icon/X.vue'
import FooterLink from '@/components/ui/FooterLink.vue'
import { createNestedT } from '@/utils/i18n'

const t = await createNestedT()

const year = new Date().getFullYear()

export interface Props {
    class?: astroHTML.JSX.HTMLAttributes['class']
    companySetting?: CompanySettingData | null
}

const {
    companySetting = null,
} = Astro.props
---

<footer class="relative overflow-hidden bg-[var(--theme-bg,#ffffff)] text-[var(--theme-text,#000000)] border-t border-[var(--theme-border,#e5e5e5)] pt-16 pb-8 before:absolute before:inset-0 before:bg-gradient-to-br before:from-[rgba(212,175,55,0.05)] before:to-[rgba(212,175,55,0.02)] before:pointer-events-none">
    <div class="relative z-10 px-4 md:px-8 lg:px-16 lg:max-w-[1400px] lg:mx-auto">
        <div class="grid md:grid-cols-2 grid-cols-1 gap-y-8 pb-8">
            <!-- 左側：公司資訊 -->
            <div class="animate-fadeInUp lg:pr-8 grid grid-cols-1 lg:max-w-md">
                <div class="mb-6">
                    <div class="text-2xl md:text-3xl font-bold text-[var(--color-primary-600,#c4a428)] mb-1 tracking-wide">
                        {companySetting?.name}
                    </div>
                    <div class="text-base font-medium text-[var(--theme-text-secondary,#666666)] tracking-[2px] uppercase">
                        HEAVEN SPA
                    </div>
                </div>
                <p class="text-sm md:text-base leading-relaxed text-[var(--theme-text-secondary,#666666)] mb-8">
                    {companySetting?.description}
                </p>

                <!-- 聯絡資訊 -->
                <div class="gap-4 grid md:grid-cols-1 grid-cols-2">
                    <div class="flex items-center justify-start gap-3 text-sm">
                        <div class="text-base opacity-80">
                            <Phone size="20" />
                        </div>
                        <a
                          href={`tel:${companySetting?.phone_1}`}
                          class="text-[var(--theme-text,#000000)] hover:text-[var(--color-primary-600,#c4a428)] transition-colors duration-300"
                        >
                            {companySetting?.phone_1}
                        </a>
                    </div>
                    <div class="flex items-center justify-start gap-3 text-sm">
                        <div class="text-base opacity-80">
                            <MapPin size="20" />
                        </div>
                        <a
                          href={`https://maps.google.com/?q=${encodeURIComponent(companySetting?.address_1 || '')}`}
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-[var(--theme-text,#000000)] hover:text-[var(--color-primary-600,#c4a428)] transition-colors duration-300"
                        >
                            {companySetting?.address_1}
                        </a>
                    </div>
                    <div class="flex items-center justify-start gap-3 text-sm">
                        <div class="text-base opacity-80">
                            <Email size="20" />
                        </div>
                        <a
                          href={`mailto:${companySetting?.email_1}`}
                          class="text-[var(--theme-text,#000000)] hover:text-[var(--color-primary-600,#c4a428)] transition-colors duration-300"
                        >
                            {companySetting?.email_1}
                        </a>
                    </div>
                    <div class="flex items-center justify-start gap-3 text-sm">
                        <div class="text-base opacity-80">
                            <Clock size="20" />
                        </div>
                        <span class="text-[var(--theme-text,#000000)]">
            {companySetting?.business_hours || ''}
          </span>
                    </div>
                    <div class="flex items-center justify-start gap-3 text-sm">
                        <div class="text-base opacity-80">
                            <CreditCard size="20" />
                        </div>
                        <span class="text-[var(--theme-text,#000000)]">
            {companySetting?.payment_method}
          </span>
                    </div>
                </div>
            </div>

            <!-- 右側：服務項目, 社群媒體, 法律與政策 -->
            <div class="grid grid-cols-3">
                <!-- 服務項目 Section -->
                <div class="animate-fadeInUp animation-delay-200">
                    <h4 class="text-lg font-semibold text-[var(--color-primary-600,#c4a428)] mb-6 uppercase tracking-wider">
                        <spa data-i18n="nav.services">{t('nav.services')}</spa>
                    </h4>
                    <ul class="space-y-3 grid grid-cols-1 md:gap-0">
                        <FooterLink href="/about" text={t('nav.about')} />
                        <FooterLink href="/services" text={t('nav.services')} />
                        <FooterLink href="/team" text={t('nav.team')} />
                        <FooterLink href="/news" text={t('nav.news')} />
                        <FooterLink href="/faq" text={t('nav.faq')} />
                        <FooterLink href="/joinUs/careers" text={t('nav.careers')} />
                        <FooterLink href="/business-partnership" text={t('nav.business_partnership')} />
                    </ul>
                </div>

                <!-- 社群媒體 -->
                <div class="animate-fadeInUp animation-delay-400">
                    <h4 class="text-lg font-semibold text-[var(--color-primary-600,#c4a428)] mb-6 uppercase tracking-wider">
                        {t('nav.social-media')}
                    </h4>
                    <ul class="space-y-3 grid grid-cols-1 md:gap-0">
                        {companySetting?.fb_link && (
                                <li>
                                    <a
                                      href={companySetting.fb_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="Facebook"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <Facebook size="16" />
                                        </div>
                                        <span class="font-normal tracking-wide">Facebook</span>
                                    </a>
                                </li>
                        )}
                        {companySetting?.ig_link && (
                                <li>
                                    <a
                                      href={companySetting.ig_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="Instagram"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <Instagram size="16" />
                                        </div>
                                        <span class="font-normal tracking-wide">Instagram</span>
                                    </a>
                                </li>
                        )}
                        {companySetting?.line_link && (
                                <li>
                                    <a
                                      href={companySetting.line_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="Line"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <Line size="18" />
                                        </div>
                                        <span class="font-normal tracking-wide">Line</span>
                                    </a>
                                </li>
                        )}
                        {companySetting?.twitter_link && (
                                <li>
                                    <a
                                      href={companySetting.twitter_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="X (Twitter)"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <X size="18" />
                                        </div>
                                        <span class="font-normal tracking-wide">Twitter</span>
                                    </a>
                                </li>
                        )}
                        {companySetting?.tg_link && (
                                <li>
                                    <a
                                      href={companySetting.tg_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="Telegram"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <Telegram size="18" />
                                        </div>
                                        <span class="font-normal tracking-wide">Telegram</span>
                                    </a>
                                </li>
                        )}
                        {companySetting?.threads_link && (
                                <li>
                                    <a
                                      href={companySetting.threads_link}
                                      class="flex items-center gap-2 text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:scale-105"
                                      target="_blank"
                                      rel="noopener noreferrer"
                                      title="Threads"
                                    >
                                        <div class="w-4 h-4 transition-transform duration-300 group-hover:scale-110">
                                            <Threads size="20" />
                                        </div>
                                        <span class="font-normal tracking-wide">Threads</span>
                                    </a>
                                </li>
                        )}
                    </ul>
                </div>

                <!-- 法律與政策 -->
                <div class="animate-fadeInUp animation-delay-600">
                    <h4
                      class="text-lg font-semibold text-[var(--color-primary-600,#c4a428)] mb-6 uppercase tracking-wider"
                      data-i18n="footer.legal-policies"
                    >
                        {t('footer.legal-policies')}
                    </h4>
                    <ul class="space-y-3 grid grid-cols-1 gap-2 md:gap-0">
                        <li>
                            <a
                              href="/privacy"
                              class="group flex items-center justify-start text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:translate-x-1"
                            >
                                <span class="opacity-0 group-hover:opacity-100 mr-2 transition-all duration-300 transform -translate-x-3 group-hover:translate-x-0">→</span>
                                <span data-i18n="footer.privacy-policy">{t('footer.privacy-policy')}</span>
                            </a>
                        </li>
                        <li>
                            <a
                              href="/terms"
                              class="group flex items-center justify-start text-sm text-[var(--theme-text-secondary,#666666)] hover:text-[var(--color-primary-600,#c4a428)] transition-all duration-300 hover:translate-x-1"
                            >
                                <span class="opacity-0 group-hover:opacity-100 mr-2 transition-all duration-300 transform -translate-x-3 group-hover:translate-x-0">→</span>
                                <span data-i18n="footer.terms-of-service">{t('footer.terms-of-service')}</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- 底部版權資訊 -->
        <div class="border-t border-[var(--theme-border,#e5e5e5)] pt-8 text-center">
            <div class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-8 text-sm text-[var(--theme-text-secondary,#666666)]">
                <p>{year}. Heaven Spa. All Rights Reserved.</p>
            </div>
        </div>
    </div>

    <style>
        /* 動畫效果 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease forwards;
        }

        .animation-delay-200 {
            animation-delay: 0.2s;
        }

        .animation-delay-400 {
            animation-delay: 0.4s;
        }

        .animation-delay-600 {
            animation-delay: 0.6s;
        }

        /* 深色模式適配 */
        .dark-theme footer {
            background: var(--theme-bg, #000000) !important;
            color: var(--theme-text, #ffffff) !important;
        }

        .dark-theme footer::before {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%) !important;
        }

        /* 深色模式下的社群媒體圖示 */
        .dark-theme footer svg {
            fill: #ffffff;
            color: #ffffff;
        }

        .dark-theme footer svg path {
            fill: #ffffff;
        }

        /* 深色模式下的懸停效果 */
        .dark-theme footer a:hover svg {
            fill: var(--color-primary-400, #d4af37) !important;
            color: var(--color-primary-400, #d4af37) !important;
        }

        .dark-theme footer a:hover svg path {
            fill: var(--color-primary-400, #d4af37) !important;
        }
    </style>
</footer>
